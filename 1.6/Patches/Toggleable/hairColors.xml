<Patch>
    <!-- Increase Colored Hair Commonality -->
    <Operation Class="XmlExtensions.OptionalPatch">
        <modId>RCP.Genes</modId>
        <key>RCP_AnimeHair</key>
        <defaultValue>false</defaultValue>
        <caseTrue>
            <!-- Remove selectionWeight from any hair that inherits GeneHairColorBase -->
            <Operation Class="PatchOperationRemove">
                <xpath>//GeneDef[@ParentName="GeneHairColorBase"]/selectionWeight</xpath>
            </Operation>
            <!-- Tier 1 (common) -->
            <Operation Class="PatchOperationAdd">
                <xpath>//GeneDef[defName="Hair_DarkBlack" or defName="Hair_DarkBrown" or defName="Hair_DarkReddish" or defName="Hair_DarkSaturatedReddish" or defName="Hair_InkBlack" or defName="Hair_MidBlack" or defName="Hair_ReddishBrown"]</xpath>
                <value>
                    <selectionWeight>5</selectionWeight>
                </value>
            </Operation>
            <!-- Tier 2 (less common) -->
            <Operation Class="PatchOperationAdd">
                <xpath>//GeneDef[defName="Hair_Blonde" or defName="Hair_LightOrange" or defName="Hair_SandyBlonde"]</xpath>
                <value>
                    <selectionWeight>4.5</selectionWeight>
                </value>
            </Operation>
            <!-- Tier 3 (uncommon) -->
            <Operation Class="PatchOperationAdd">
                <xpath>//GeneDef[defName="Hair_BrightRed"]</xpath>
                <value>
                    <selectionWeight>1</selectionWeight>
                </value>
            </Operation>
            <!-- Tier 4 (rare) -->
            <Operation Class="PatchOperationAdd">
                <xpath>//GeneDef[defName="Hair_LightBlue" or defName="Hair_LightGreen" or defName="Hair_LightPurple" or defName="Hair_LightTeal" or defName="Hair_Pink" or defName="Hair_SnowWhite"]</xpath>
                <value>
                    <selectionWeight>0.5</selectionWeight>
                </value>
            </Operation>
            <!-- Add selectionWeight to RCP hairs -->
            <Operation Class="PatchOperationConditional">
                <xpath>//GeneDef[defName="RCP_HairBlack"]</xpath>
                <match Class="PatchOperationSequence">
                    <operations>
                        <!-- Tier 1 (common) -->
                        <li Class="PatchOperationAdd">
                            <xpath>//GeneDef[defName="RCP_HairBlack" or defName="RCP_HairUmberBurnt" or defName="RCP_HairBrownDark" or defName="RCP_HairGrayDark" or defName="RCP_HairBrownDirt" or defName="RCP_HairBrownFaded" or defName="RCP_HairBrownLight" or defName="RCP_HairSlate" or defName="RCP_HairBrownSubtle" or defName="RCP_HairBrownWood"]</xpath>
                            <value>
                                <selectionWeight>5</selectionWeight>
                            </value>
                        </li>
                        <!-- Tier 2 (less common) -->
                        <li Class="PatchOperationAdd">
                            <xpath>//GeneDef[defName="RCP_HairOrange"]</xpath>
                            <value>
                                <selectionWeight>4.5</selectionWeight>
                            </value>
                        </li>
                        <!-- Tier 3 (uncommon) -->
                        <li Class="PatchOperationAdd">
                            <xpath>//GeneDef[defName="RCP_HairAuburn" or defName="RCP_HairBlue" or defName="RCP_HairMossBright" or defName="RCP_HairBurgundy" or defName="RCP_HairMauveDark" or defName="RCP_HairOliveDark" or defName="RCP_HairPurpleDeep" or defName="RCP_HairDusk" or defName="RCP_HairGreenForest" or defName="RCP_HairGrape" or defName="RCP_HairGreen" or defName="RCP_HairBlueIce" or defName="RCP_HairIndigo" or defName="RCP_HairIndigoLight" or defName="RCP_HairMagenta" or defName="RCP_HairMarine" or defName="RCP_HairGreenMarsh" or defName="RCP_HairMoss" or defName="RCP_HairPurpleMuted" or defName="RCP_HairBluePastel" or defName="RCP_HairGreenPastel" or defName="RCP_HairOrangePastel" or defName="RCP_HairPinkPastel" or defName="RCP_HairRedPastel" or defName="RCP_HairYellowPastel" or defName="RCP_HairGreenPine" or defName="RCP_HairPlum" or defName="RCP_HairPurple" or defName="RCP_HairRed" or defName="RCP_HairSage" or defName="RCP_HairBlueSky" or defName="RCP_HairBlueSubtle" or defName="RCP_HairMagentaSubtle" or defName="RCP_HairPurpleSubtle" or defName="RCP_HairViridianSubtle" or defName="RCP_HairGreenSwamp" or defName="RCP_HairTeal" or defName="RCP_HairViridian"]</xpath>
                            <value>
                                <selectionWeight>1</selectionWeight>
                            </value>
                        </li>
                        <!-- Tier 4 (rare) -->
                        <li Class="PatchOperationAdd">
                            <xpath>//GeneDef[defName="RCP_HairGreenFaded" or defName="RCP_HairGreenMuddy" or defName="RCP_HairOlive" or defName="RCP_HairLimePale" or defName="RCP_HairScarlet" or defName="RCP_HairRedSubtle"]</xpath>
                            <value>
                                <selectionWeight>0.5</selectionWeight>
                            </value>
                        </li>
                    </operations>
                </match>
            </Operation>
        </caseTrue>
    </Operation>
    <!-- Remove Hair -->
    <Operation Class="XmlExtensions.OptionalPatch">
        <modId>RCP.Genes</modId>
        <key>RCP_RemoveAllHair</key>
        <defaultValue>false</defaultValue>
        <caseTrue>
            <Operation Class="PatchOperationRemove">
                <xpath>//GeneDef[@ParentName="RCP_HairColorBase" or @Name="RCP_HairColorBase"] | //GeneCategoryDef[defName="RCP_HairColor"]</xpath>
            </Operation>
        </caseTrue>
    </Operation>
</Patch>